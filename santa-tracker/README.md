# Documentation Resolution Demo

This project demonstrates how to use an [ArtifactView](https://docs.gradle.org/current/javadoc/org/gradle/api/artifacts/ArtifactView.html) to obtain source and Javadoc jars for an Android project's runtime dependencies and download them in parallel.

## Running the Android example

1) Run `./gradlew :santa-tracker:resolveAndroidDocumentation` to attempt to resolve Source and Javadoc artifacts of all the runtime dependencies of the release variant of the Android project.  These will be printed to the console, downloaded and copied into the `lib/build/sources` directory. 

2) Running this task initially results in only AAR files.  This demonstrates the current behavior.  You should see output like this:

```
> Task :lib:resolveAndroidJavadoc
Resolved the following files: [activity-1.1.0-alpha01.aar, appcompat-1.0.2.aar, asynclayoutinflater-1.0.0.aar, cardview-1.0.0.aar, coordinatorlayout-1.0.0.aar, core-1.1.0-rc01.aar, core-runtime-2.1.0-rc01.aar, cursoradapter-1.0.0.aar, customview-1.0.0.aar, documentfile-1.0.0.aar, drawerlayout-1.0.0.aar, firebase-abt-16.0.1.aar, firebase-analytics-16.0.4.aar, firebase-analytics-impl-16.2.2.aar, firebase-common-16.0.3.aar, firebase-dynamic-links-16.1.2.aar, firebase-iid-17.0.3.aar, firebase-iid-interop-16.0.1.aar, firebase-measurement-connector-17.0.1.aar, firebase-measurement-connector-impl-17.0.2.aar, firebase-storage-common-16.0.1.aar, fragment-1.2.0-alpha01.aar, interpolator-1.0.0.aar, legacy-support-core-ui-1.0.0.aar, legacy-support-core-utils-1.0.0.aar, lifecycle-livedata-2.2.0-alpha02.aar, lifecycle-livedata-core-2.2.0-alpha02.aar, lifecycle-process-2.2.0-alpha02.aar, lifecycle-runtime-2.2.0-alpha02.aar, lifecycle-service-2.2.0-alpha02.aar, lifecycle-viewmodel-2.2.0-alpha02.aar, loader-1.0.0.aar, localbroadcastmanager-1.0.0.aar, media-1.0.0.aar, palette-1.0.0.aar, play-services-ads-identifier-16.0.0.aar, play-services-analytics-impl-16.0.4.aar, play-services-appinvite-16.0.4.aar, play-services-base-16.0.1.aar, play-services-basement-16.0.1.aar, play-services-cast-16.0.3.aar, play-services-drive-16.0.0.aar, play-services-flags-16.0.1.aar, play-services-measurement-api-16.0.2.aar, play-services-measurement-base-16.0.3.aar, play-services-phenotype-16.0.0.aar, play-services-stats-16.0.1.aar, play-services-tagmanager-v4-impl-16.0.4.aar, play-services-tasks-16.0.1.aar, print-1.0.0.aar, recyclerview-1.0.0.aar, room-runtime-2.2.4.aar, savedstate-1.0.0-rc01.aar, slidingpanelayout-1.0.0.aar, sqlite-2.0.1.aar, sqlite-framework-2.0.1.aar, swiperefreshlayout-1.0.0.aar, transition-1.0.0.aar, vectordrawable-1.0.1.aar, vectordrawable-animated-1.0.0.aar, versionedparcelable-1.1.0-rc01.aar, viewpager-1.0.0.aar]

> Task :santa-tracker:resolveAndroidSource
Resolved the following files: [activity-1.1.0-alpha01.aar, appcompat-1.0.2.aar, asynclayoutinflater-1.0.0.aar, cardview-1.0.0.aar, coordinatorlayout-1.0.0.aar, core-1.1.0-rc01.aar, core-runtime-2.1.0-rc01.aar, cursoradapter-1.0.0.aar, customview-1.0.0.aar, documentfile-1.0.0.aar, drawerlayout-1.0.0.aar, firebase-abt-16.0.1.aar, firebase-analytics-16.0.4.aar, firebase-analytics-impl-16.2.2.aar, firebase-common-16.0.3.aar, firebase-dynamic-links-16.1.2.aar, firebase-iid-17.0.3.aar, firebase-iid-interop-16.0.1.aar, firebase-measurement-connector-17.0.1.aar, firebase-measurement-connector-impl-17.0.2.aar, firebase-storage-common-16.0.1.aar, fragment-1.2.0-alpha01.aar, interpolator-1.0.0.aar, legacy-support-core-ui-1.0.0.aar, legacy-support-core-utils-1.0.0.aar, lifecycle-livedata-2.2.0-alpha02.aar, lifecycle-livedata-core-2.2.0-alpha02.aar, lifecycle-process-2.2.0-alpha02.aar, lifecycle-runtime-2.2.0-alpha02.aar, lifecycle-service-2.2.0-alpha02.aar, lifecycle-viewmodel-2.2.0-alpha02.aar, loader-1.0.0.aar, localbroadcastmanager-1.0.0.aar, media-1.0.0.aar, palette-1.0.0.aar, play-services-ads-identifier-16.0.0.aar, play-services-analytics-impl-16.0.4.aar, play-services-appinvite-16.0.4.aar, play-services-base-16.0.1.aar, play-services-basement-16.0.1.aar, play-services-cast-16.0.3.aar, play-services-drive-16.0.0.aar, play-services-flags-16.0.1.aar, play-services-measurement-api-16.0.2.aar, play-services-measurement-base-16.0.3.aar, play-services-phenotype-16.0.0.aar, play-services-stats-16.0.1.aar, play-services-tagmanager-v4-impl-16.0.4.aar, play-services-tasks-16.0.1.aar, print-1.0.0.aar, recyclerview-1.0.0.aar, room-runtime-2.2.4.aar, savedstate-1.0.0-rc01.aar, slidingpanelayout-1.0.0.aar, sqlite-2.0.1.aar, sqlite-framework-2.0.1.aar, swiperefreshlayout-1.0.0.aar, transition-1.0.0.aar, vectordrawable-1.0.1.aar, vectordrawable-animated-1.0.0.aar, versionedparcelable-1.1.0-rc01.aar, viewpager-1.0.0.aar]

BUILD SUCCESSFUL in 978ms
```

3) Next, open the file `santa-tracker/build.gradle` and uncomment line 178:

```
// view.withVariantReselection();
```

4) Now rerun `./gradlew :santa-tracker:resolveAndroidDocumentation`.  This demonstrates the new behavior.  You should see output like this:

```
> Task :lib:resolveAndroidJavadoc
Resolved the following files: [annotation-1.1.0-javadoc.jar, annotations-13.0-javadoc.jar, annotations-4.8.0-javadoc.jar, dagger-2.23.2-javadoc.jar, dagger-android-2.23.2-javadoc.jar, dagger-android-support-2.23.2-javadoc.jar, disklrucache-4.8.0-javadoc.jar, firebase-common-16.0.3-javadoc.jar, firebase-iid-17.0.3-javadoc.jar, firebase-messaging-17.3.3-javadoc.jar, gifdecoder-4.8.0-javadoc.jar, glide-4.8.0-javadoc.jar, gson-2.8.5-javadoc.jar, hamcrest-core-1.3-javadoc.jar, javax.inject-1-javadoc.jar, junit-4.12-javadoc.jar, kotlin-android-extensions-runtime-1.4.32-javadoc.jar, kotlin-stdlib-1.4.32-javadoc.jar, kotlin-stdlib-common-1.4.32-javadoc.jar, kotlin-stdlib-jdk7-1.4.32-javadoc.jar, leakcanary-android-no-op-1.6.1-javadoc.jar, okhttp-3.12.0-javadoc.jar, okio-1.15.0-javadoc.jar, recyclerviewmergeadapter-2.1.0-javadoc.jar, seismic-1.0.2-javadoc.jar]

> Task :santa-tracker:resolveAndroidSource
Resolved the following files: [activity-1.1.0-alpha01-sources.jar, annotation-1.1.0-sources.jar, annotations-13.0-sources.jar, annotations-4.8.0-sources.jar, appcompat-1.0.2-sources.jar, asynclayoutinflater-1.0.0-sources.jar, browser-1.0.0-sources.jar, cardview-1.0.0-sources.jar, collection-1.1.0-sources.jar, coordinatorlayout-1.0.0-sources.jar, core-1.1.0-rc01-sources.jar, core-common-2.1.0-rc01-sources.jar, core-ktx-1.0.1-sources.jar, core-runtime-2.1.0-rc01-sources.jar, cursoradapter-1.0.0-sources.jar, customview-1.0.0-sources.jar, dagger-2.23.2-sources.jar, dagger-android-2.23.2-sources.jar, dagger-android-support-2.23.2-sources.jar, disklrucache-4.8.0-sources.jar, documentfile-1.0.0-sources.jar, drawerlayout-1.0.0-sources.jar, flexbox-1.0.0-sources.jar, fragment-1.2.0-alpha01-sources.jar, gifdecoder-4.8.0-sources.jar, glide-4.8.0-sources.jar, gson-2.8.5-sources.jar, hamcrest-core-1.3-sources.jar, interpolator-1.0.0-sources.jar, javax.inject-1-sources.jar, junit-4.12-sources.jar, kotlin-android-extensions-runtime-1.4.32-sources.jar, kotlin-stdlib-1.4.32-sources.jar, kotlin-stdlib-common-1.4.32-sources.jar, kotlin-stdlib-jdk7-1.4.32-sources.jar, leakcanary-android-no-op-1.6.1-sources.jar, leanback-1.0.0-sources.jar, legacy-support-core-ui-1.0.0-sources.jar, legacy-support-core-utils-1.0.0-sources.jar, legacy-support-v4-1.0.0-sources.jar, lifecycle-common-2.2.0-alpha02-sources.jar, lifecycle-extensions-2.2.0-alpha02-sources.jar, lifecycle-livedata-2.2.0-alpha02-sources.jar, lifecycle-livedata-core-2.2.0-alpha02-sources.jar, lifecycle-process-2.2.0-alpha02-sources.jar, lifecycle-runtime-2.2.0-alpha02-sources.jar, lifecycle-service-2.2.0-alpha02-sources.jar, lifecycle-viewmodel-2.2.0-alpha02-sources.jar, loader-1.0.0-sources.jar, localbroadcastmanager-1.0.0-sources.jar, media-1.0.0-sources.jar, mediarouter-1.0.0-sources.jar, okhttp-3.12.0-sources.jar, okio-1.15.0-sources.jar, palette-1.0.0-sources.jar, print-1.0.0-sources.jar, recyclerview-1.0.0-sources.jar, recyclerviewmergeadapter-2.1.0-sources.jar, room-common-2.2.4-sources.jar, room-migration-2.2.4-sources.jar, room-runtime-2.2.4-sources.jar, room-testing-2.2.4-sources.jar, savedstate-1.0.0-rc01-sources.jar, seismic-1.0.2-sources.jar, slidingpanelayout-1.0.0-sources.jar, sqlite-2.0.1-sources.jar, sqlite-framework-2.0.1-sources.jar, swiperefreshlayout-1.0.0-sources.jar, transition-1.0.0-sources.jar, vectordrawable-1.0.1-sources.jar, vectordrawable-animated-1.0.0-sources.jar, versionedparcelable-1.1.0-rc01-sources.jar, viewpager-1.0.0-sources.jar]

BUILD SUCCESSFUL in 786ms
```
